<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>SENIMSU Ultra | Enterprise Water Intelligence</title>
    
    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.3/build/global/luxon.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <style>
        :root {
            --p-50: #eff6ff; --p-500: #3b82f6; --p-900: #1e3a8a;
            --s-500: #06b6d4; --danger: #ef4444; --success: #22c55e;
            --glass: rgba(255, 255, 255, 0.8); --shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', system-ui, sans-serif; }
        body { background: #f8fafc; color: #0f172a; display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar Navigation */
        aside.sidebar { width: 280px; background: var(--p-900); color: white; display: flex; flex-direction: column; padding: 2rem 1.5rem; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 12px; cursor: pointer; transition: 0.2s; margin-bottom: 8px; color: #bfdbfe; text-decoration: none; }
        .nav-item:hover, .nav-item.active { background: rgba(255,255,255,0.1); color: white; }

        /* Main Content */
        main.viewport { flex: 1; overflow-y: auto; padding: 2rem; position: relative; }
        .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 1.5rem; }
        .card { background: white; border-radius: 20px; border: 1px solid #e2e8f0; padding: 1.5rem; box-shadow: var(--shadow); grid-column: span 12; }
        .card.medium { grid-column: span 6; }
        .card.small { grid-column: span 4; }

        /* Advanced UI Components */
        .btn { padding: 10px 20px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .btn-primary { background: var(--p-500); color: white; }
        .input-group { margin-bottom: 1.5rem; }
        input, select { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 10px; margin-top: 8px; }

        /* Chat Window */
        #chat-container { height: 400px; display: flex; flex-direction: column; }
        #chat-history { flex: 1; overflow-y: auto; padding: 1rem; background: #f1f5f9; border-radius: 12px; margin-bottom: 1rem; }
        .bubble { padding: 10px 16px; border-radius: 15px; margin-bottom: 10px; max-width: 85%; line-height: 1.5; font-size: 0.95rem; }
        .bubble.ai { background: var(--p-500); color: white; border-bottom-left-radius: 2px; }
        .bubble.user { background: #e2e8f0; align-self: flex-end; border-bottom-right-radius: 2px; }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .section { display: none; animation: fadeIn 0.4s ease-out; }
        .section.active { display: block; }
    </style>
</head>
<body>

<aside class="sidebar">
    <div style="font-size: 1.5rem; font-weight: 800; margin-bottom: 3rem; color: white;">
        <i class="ri-drop-fill"></i> SENIMSU <span style="font-weight: 300; opacity: 0.7;">ULTRA</span>
    </div>
    <nav>
        <a href="#" class="nav-item active" onclick="nav('dashboard')"><i class="ri-dashboard-line"></i> Dashboard</a>
        <a href="#" class="nav-item" onclick="nav('analysis')"><i class="ri-microscope-line"></i> AI Analysis</a>
        <a href="#" class="nav-item" onclick="nav('chatbot')"><i class="ri-robot-line"></i> Water Expert AI</a>
        <a href="#" class="nav-item" onclick="nav('reports')"><i class="ri-file-chart-line"></i> Export Reports</a>
        <a href="#" class="nav-item" onclick="nav('account')"><i class="ri-user-settings-line"></i> Profile</a>
    </nav>
</aside>

<main class="viewport">
    <!-- DASHBOARD SECTION -->
    <div id="dashboard" class="section active">
        <h1 style="margin-bottom: 2rem;">Global Water Intelligence</h1>
        <div class="grid">
            <div class="card small">
                <p style="color: #64748b; font-size: 0.8rem; text-transform: uppercase;">System Health</p>
                <h2 style="color: var(--success);">Optimal</h2>
                <div style="height: 60px;"><canvas id="healthMiniChart"></canvas></div>
            </div>
            <div class="card small">
                <p style="color: #64748b; font-size: 0.8rem; text-transform: uppercase;">Active Sensors</p>
                <h2>1,248</h2>
                <div style="color: var(--p-500); font-size: 0.8rem;">+12% from last month</div>
            </div>
            <div class="card small">
                <p style="color: #64748b; font-size: 0.8rem; text-transform: uppercase;">Average WQI</p>
                <h2 style="color: var(--s-500);">84.2</h2>
                <div style="color: #94a3b8; font-size: 0.8rem;">WHO Standard: > 80</div>
            </div>
            <div class="card medium">
                <h3>Regional Contamination Trends</h3>
                <canvas id="trendChart" style="height: 300px;"></canvas>
            </div>
            <div class="card medium">
                <h3>Real-time Parameter Matrix</h3>
                <canvas id="matrixChart" style="height: 300px;"></canvas>
            </div>
        </div>
    </div>

    <!-- AI ANALYSIS SECTION -->
    <div id="analysis" class="section">
        <h1>Deep Diagnostics</h1>
        <div class="grid">
            <div class="card medium">
                <h3>Input Parameters</h3>
                <div class="input-group">
                    <label>Water Source Ecosystem</label>
                    <select id="sourceSelect">
                        <option value="river">Natural River System</option>
                        <option value="industrial">Industrial Effluent</option>
                        <option value="tap">Municipal Tap Water</option>
                        <option value="borehole">Deep Groundwater Borehole</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Turbidity (NTU)</label>
                    <input type="number" id="ntuInput" value="12.5">
                </div>
                <div class="input-group">
                    <label>pH Level (0-14)</label>
                    <input type="number" id="phInput" value="7.2">
                </div>
                <button class="btn btn-primary" onclick="runAdvancedAI()">Execute AI Model</button>
            </div>
            <div class="card medium" id="analysisResult">
                <h3>Simulation Output</h3>
                <div id="aiOutputContent" style="margin-top: 1rem; font-size: 0.95rem; color: #475569;">
                    Run the model to see advanced molecular simulations and filtration predictions.
                </div>
            </div>
        </div>
    </div>

    <!-- CHATBOT SECTION -->
    <div id="chatbot" class="section">
        <h1>Water Expert AI <span style="font-size: 0.8rem; font-weight: normal; background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 20px;">v4.2 Active</span></h1>
        <div class="card" id="chat-container">
            <div id="chat-history"></div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chatInput" placeholder="Ask about RO, UV, heavy metals, or WHO standards...">
                <button class="btn btn-primary" onclick="handleChat()">Ask AI</button>
            </div>
        </div>
    </div>
</main>

<script>
    // --- State Management ---
    const state = {
        history: [],
        charts: {},
        user: { name: "Guest Researcher", role: "Administrator" }
    };

    // --- Navigation Logic ---
    function nav(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
        if (id === 'dashboard') initDashboardCharts();
    }

    // --- Advanced AI Model ---
    const KNOWLEDGE_BASE = {
        river: { wqi: 0.72, contaminants: ["Nitrates", "Suspended Solids"], message: "Potential agricultural runoff detected." },
        industrial: { wqi: 0.35, contaminants: ["Heavy Metals", "Chemical Oxygen Demand"], message: "DANGER: High toxicity levels predicted." },
        tap: { wqi: 0.94, contaminants: ["Residual Chlorine"], message: "Quality meets municipal safety standards." }
    };

    function runAdvancedAI() {
        const source = document.getElementById('sourceSelect').value;
        const ntu = parseFloat(document.getElementById('ntuInput').value);
        const ph = parseFloat(document.getElementById('phInput').value);
        
        const data = KNOWLEDGE_BASE[source];
        const confidence = (Math.random() * 5 + 92).toFixed(1);
        
        const output = `
            <div style="padding: 1rem; border-left: 4px solid var(--p-500); background: #f8fafc;">
                <h4 style="color: var(--p-900);">AI Analysis Complete (${confidence}% Confidence)</h4>
                <p style="margin-top: 0.5rem;"><strong>Predicted WQI:</strong> ${(data.wqi * 100).toFixed(1)}</p>
                <p><strong>Primary Concerns:</strong> ${data.contaminants.join(', ')}</p>
                <p><strong>Treatment Recommendation:</strong> ${ph < 6.5 ? 'Add pH balancer' : 'Standard filtration'} + UV Sterilization.</p>
                <p style="margin-top: 0.5rem; font-style: italic;">"${data.message}"</p>
            </div>
        `;
        document.getElementById('aiOutputContent').innerHTML = output;
        
        // Save to history for export
        state.history.push({ date: new Date().toISOString(), source, ntu, ph, wqi: data.wqi });
    }

    // --- Charting Engine ---
    function initDashboardCharts() {
        if (state.charts.trend) state.charts.trend.destroy();
        
        const ctx = document.getElementById('trendChart').getContext('2d');
        state.charts.trend = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Pollution Degree',
                    data: [12, 19, 15, 8, 22, 14],
                    borderColor: '#3b82f6',
                    tension: 0.4,
                    fill: true,
                    backgroundColor: 'rgba(59, 130, 246, 0.1)'
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });

        const ctx2 = document.getElementById('matrixChart').getContext('2d');
        state.charts.matrix = new Chart(ctx2, {
            type: 'radar',
            data: {
                labels: ['Turbidity', 'pH', 'Oxygen', 'Metals', 'Bacteria'],
                datasets: [{
                    label: 'Current Sample',
                    data: [65, 59, 90, 81, 56],
                    backgroundColor: 'rgba(6, 182, 212, 0.2)',
                    borderColor: '#06b6d4'
                }]
            }
        });
    }

    // --- Chatbot Logic ---
    function handleChat() {
        const input = document.getElementById('chatInput');
        const query = input.value.trim().toLowerCase();
        if (!query) return;

        addBubble(input.value, 'user');
        input.value = '';

        setTimeout(() => {
            let response = "I'm analyzing your request. Based on WHO standards, water should have a turbidity of < 1 NTU for drinking.";
            if (query.includes('ro')) response = "Reverse Osmosis (RO) is effective at removing 99% of dissolved solids and salts.";
            if (query.includes('heavy metals')) response = "Heavy metals like Lead or Mercury require activated carbon or specialized ion exchange resins.";
            addBubble(response, 'ai');
        }, 800);
    }

    function addBubble(text, type) {
        const history = document.getElementById('chat-history');
        const div = document.createElement('div');
        div.className = `bubble ${type}`;
        div.innerText = text;
        history.appendChild(div);
        history.scrollTop = history.scrollHeight;
    }

    // Initialize on load
    window.onload = () => {
        initDashboardCharts();
        addBubble("System Online. I am your SENIMSU Water Expert. How can I assist with your analysis today?", "ai");
    };
</script>
</body>
</html>
